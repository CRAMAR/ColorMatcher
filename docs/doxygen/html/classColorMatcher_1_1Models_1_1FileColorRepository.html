<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ColorMatcher: ColorMatcher.Models.FileColorRepository Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ColorMatcher
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceColorMatcher.html">ColorMatcher</a></li><li class="navelem"><a class="el" href="namespaceColorMatcher_1_1Models.html">Models</a></li><li class="navelem"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html">FileColorRepository</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classColorMatcher_1_1Models_1_1FileColorRepository-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ColorMatcher.Models.FileColorRepository Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>File-based implementation of IColorRepository that persists color projects to JSON files.  
 <a href="classColorMatcher_1_1Models_1_1FileColorRepository.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ColorMatcher.Models.FileColorRepository:</div>
<div class="dyncontent">
<div class="center"><img src="classColorMatcher_1_1Models_1_1FileColorRepository__inherit__graph.png" border="0" usemap="#aColorMatcher_8Models_8FileColorRepository_inherit__map" alt="Inheritance graph"/></div>
<map name="aColorMatcher_8Models_8FileColorRepository_inherit__map" id="aColorMatcher_8Models_8FileColorRepository_inherit__map">
<area shape="rect" title="File&#45;based implementation of IColorRepository that persists color projects to JSON files." alt="" coords="5,79,192,119"/>
<area shape="rect" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html" title="Repository interface for persisting color matching projects and history." alt="" coords="33,5,164,31"/>
<area shape="poly" title=" " alt="" coords="101,44,101,79,96,79,96,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ColorMatcher.Models.FileColorRepository:</div>
<div class="dyncontent">
<div class="center"><img src="classColorMatcher_1_1Models_1_1FileColorRepository__coll__graph.png" border="0" usemap="#aColorMatcher_8Models_8FileColorRepository_coll__map" alt="Collaboration graph"/></div>
<map name="aColorMatcher_8Models_8FileColorRepository_coll__map" id="aColorMatcher_8Models_8FileColorRepository_coll__map">
<area shape="rect" title="File&#45;based implementation of IColorRepository that persists color projects to JSON files." alt="" coords="5,79,192,119"/>
<area shape="rect" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html" title="Repository interface for persisting color matching projects and history." alt="" coords="33,5,164,31"/>
<area shape="poly" title=" " alt="" coords="101,44,101,79,96,79,96,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a42a7ec1adc5c2b12da0e8058ef5bb7db" id="r_a42a7ec1adc5c2b12da0e8058ef5bb7db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a42a7ec1adc5c2b12da0e8058ef5bb7db">FileColorRepository</a> (string projectsDirectory)</td></tr>
<tr class="memdesc:a42a7ec1adc5c2b12da0e8058ef5bb7db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new FileColorRepository for the specified directory.  <br /></td></tr>
<tr class="separator:a42a7ec1adc5c2b12da0e8058ef5bb7db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006484e7bced23ad074ad5371c0e80a5" id="r_a006484e7bced23ad074ad5371c0e80a5"><td class="memItemLeft" align="right" valign="top"><a id="a006484e7bced23ad074ad5371c0e80a5" name="a006484e7bced23ad074ad5371c0e80a5"></a>
async Task&#160;</td><td class="memItemRight" valign="bottom"><b>LoadAllProjectsAsync</b> ()</td></tr>
<tr class="memdesc:a006484e7bced23ad074ad5371c0e80a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads all projects from disk into memory. Should be called once on application startup. <br /></td></tr>
<tr class="separator:a006484e7bced23ad074ad5371c0e80a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a9bc7dec0613e2934850023740d0dc" id="r_a73a9bc7dec0613e2934850023740d0dc"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a73a9bc7dec0613e2934850023740d0dc">CreateProjectAsync</a> (<a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> project)</td></tr>
<tr class="memdesc:a73a9bc7dec0613e2934850023740d0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new color project and persists it.  <br /></td></tr>
<tr class="separator:a73a9bc7dec0613e2934850023740d0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1936ee4458507fb8374279019ec9baf" id="r_ab1936ee4458507fb8374279019ec9baf"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a>?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#ab1936ee4458507fb8374279019ec9baf">GetProjectAsync</a> (string projectId)</td></tr>
<tr class="memdesc:ab1936ee4458507fb8374279019ec9baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a project by its unique identifier.  <br /></td></tr>
<tr class="separator:ab1936ee4458507fb8374279019ec9baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0014657d89472bf441ea9e49c7b4f05b" id="r_a0014657d89472bf441ea9e49c7b4f05b"><td class="memItemLeft" align="right" valign="top">async Task&lt; IEnumerable&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a0014657d89472bf441ea9e49c7b4f05b">GetAllProjectsAsync</a> ()</td></tr>
<tr class="memdesc:a0014657d89472bf441ea9e49c7b4f05b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves all projects stored in the repository.  <br /></td></tr>
<tr class="separator:a0014657d89472bf441ea9e49c7b4f05b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ddb5a53e624f78f60d63d95e42d546" id="r_a34ddb5a53e624f78f60d63d95e42d546"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a34ddb5a53e624f78f60d63d95e42d546">UpdateProjectAsync</a> (<a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> project)</td></tr>
<tr class="memdesc:a34ddb5a53e624f78f60d63d95e42d546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an existing project with new values.  <br /></td></tr>
<tr class="separator:a34ddb5a53e624f78f60d63d95e42d546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65958ac99d76fe7e1bcc4519e70cb5b8" id="r_a65958ac99d76fe7e1bcc4519e70cb5b8"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a65958ac99d76fe7e1bcc4519e70cb5b8">DeleteProjectAsync</a> (string projectId)</td></tr>
<tr class="memdesc:a65958ac99d76fe7e1bcc4519e70cb5b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a project and all associated data from the repository.  <br /></td></tr>
<tr class="separator:a65958ac99d76fe7e1bcc4519e70cb5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b9bd0a47e859f93604f5f0b6d30fd8" id="r_ae1b9bd0a47e859f93604f5f0b6d30fd8"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#ae1b9bd0a47e859f93604f5f0b6d30fd8">AddColorHistoryAsync</a> (string projectId, <a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a> colorEntry)</td></tr>
<tr class="memdesc:ae1b9bd0a47e859f93604f5f0b6d30fd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new color history entry to a project's history.  <br /></td></tr>
<tr class="separator:ae1b9bd0a47e859f93604f5f0b6d30fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47d6eadfd02f45b97032300caecb6c74" id="r_a47d6eadfd02f45b97032300caecb6c74"><td class="memItemLeft" align="right" valign="top">async Task&lt; IEnumerable&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a47d6eadfd02f45b97032300caecb6c74">GetColorHistoryAsync</a> (string projectId)</td></tr>
<tr class="memdesc:a47d6eadfd02f45b97032300caecb6c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves complete color history for a specific project.  <br /></td></tr>
<tr class="separator:a47d6eadfd02f45b97032300caecb6c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c9c32da634d491db87cf58acf53dfc" id="r_a22c9c32da634d491db87cf58acf53dfc"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a22c9c32da634d491db87cf58acf53dfc">ClearColorHistoryAsync</a> (string projectId)</td></tr>
<tr class="memdesc:a22c9c32da634d491db87cf58acf53dfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all color history entries for a project.  <br /></td></tr>
<tr class="separator:a22c9c32da634d491db87cf58acf53dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0bd831d44600f873e7838696a4764e" id="r_a3c0bd831d44600f873e7838696a4764e"><td class="memItemLeft" align="right" valign="top">async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a3c0bd831d44600f873e7838696a4764e">ExportProjectAsJsonAsync</a> (string projectId)</td></tr>
<tr class="memdesc:a3c0bd831d44600f873e7838696a4764e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports a project to JSON format for external use or backup.  <br /></td></tr>
<tr class="separator:a3c0bd831d44600f873e7838696a4764e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dce0fa55b66c832b4fe82b64b243e7c" id="r_a4dce0fa55b66c832b4fe82b64b243e7c"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classColorMatcher_1_1Models_1_1FileColorRepository.html#a4dce0fa55b66c832b4fe82b64b243e7c">ImportProjectFromJsonAsync</a> (string jsonData)</td></tr>
<tr class="memdesc:a4dce0fa55b66c832b4fe82b64b243e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports a project from JSON format.  <br /></td></tr>
<tr class="separator:a4dce0fa55b66c832b4fe82b64b243e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File-based implementation of IColorRepository that persists color projects to JSON files. </p>
<p>Stores each ColorProject as a separate JSON file in a specified directory, with complete history of all color matching attempts (ColorHistoryEntry) preserved.</p>
<p><b>Persistence Architecture</b></p>
<p>This implementation uses a hybrid approach:</p><ol type="1">
<li><b>Disk I/O</b>: JSON files for durable persistence</li>
<li><b>In-Memory Cache</b>: InMemoryColorRepository for fast access</li>
</ol>
<p>Design rationale:</p><ul>
<li>All projects loaded from disk into memory on application startup</li>
<li>Subsequent reads come from fast in-memory cache</li>
<li>Writes go to both memory and disk for consistency</li>
<li>Thread-safe via internal locking</li>
</ul>
<p><b>File Organization</b></p>
<p>Directory structure: </p><div class="fragment"><div class="line">ProjectsDirectory/</div>
<div class="line">  ├── 123e4567-e89b-12d3-a456-426614174000.json</div>
<div class="line">  ├── 234e5678-f89b-12d3-a456-426614174001.json</div>
<div class="line">  └── 345e6789-g89b-12d3-a456-426614174002.json</div>
</div><!-- fragment --><p>Filename = ProjectId.json (GUID-based for uniqueness) Format = JSON containing complete ColorProject with all ColorHistoryEntry records</p>
<p><b>JSON Schema</b></p>
<p>Each file contains serialized ColorProject: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;123e4567-e89b-12d3-a456-426614174000&quot;,</div>
<div class="line">  &quot;name&quot;: &quot;Ferrari Red Match&quot;,</div>
<div class="line">  &quot;description&quot;: &quot;Matching paint for custom car project&quot;,</div>
<div class="line">  &quot;referenceColor&quot;: { &quot;R&quot;: 255, &quot;G&quot;: 0, &quot;B&quot;: 0 },</div>
<div class="line">  &quot;sampleColor&quot;: { &quot;R&quot;: 254, &quot;G&quot;: 1, &quot;B&quot;: 2 },</div>
<div class="line">  &quot;createdAt&quot;: &quot;2024-01-15T10:30:00Z&quot;,</div>
<div class="line">  &quot;modifiedAt&quot;: &quot;2024-01-15T10:35:00Z&quot;,</div>
<div class="line">  &quot;colorHistory&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;id&quot;: &quot;456e7890-...&quot;,</div>
<div class="line">      &quot;referenceColor&quot;: { &quot;R&quot;: 255, &quot;G&quot;: 0, &quot;B&quot;: 0 },</div>
<div class="line">      &quot;sampleColor&quot;: { &quot;R&quot;: 255, &quot;G&quot;: 0, &quot;B&quot;: 5 },</div>
<div class="line">      &quot;deltaE&quot;: 5.2,</div>
<div class="line">      ...</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Initialization Flow</b></p>
<ol type="1">
<li><b>Constructor</b>: Accepts ProjectsDirectory path, creates if missing</li>
<li><b>LoadAllProjectsAsync()</b>: Called once on startup, loads all JSON files into memory</li>
<li><b>Normal Operations</b>: Read from memory, write to both memory and disk</li>
<li><b>Thread Safety</b>: Internal lock prevents concurrent modifications</li>
</ol>
<p>Typical startup code: </p><div class="fragment"><div class="line">var repo = <span class="keyword">new</span> <a class="code hl_class" href="classColorMatcher_1_1Models_1_1FileColorRepository.html">FileColorRepository</a>(<span class="stringliteral">@&quot;C:\Users\Me\ColorMatcher\Projects&quot;</span>);</div>
<div class="line">await repo.LoadAllProjectsAsync(); <span class="comment">// Load from disk</span></div>
<div class="line">var projects = await repo.GetAllProjectsAsync(); <span class="comment">// Now in memory, fast</span></div>
<div class="ttc" id="aclassColorMatcher_1_1Models_1_1FileColorRepository_html"><div class="ttname"><a href="classColorMatcher_1_1Models_1_1FileColorRepository.html">ColorMatcher.Models.FileColorRepository</a></div><div class="ttdoc">File-based implementation of IColorRepository that persists color projects to JSON files.</div><div class="ttdef"><b>Definition</b> FileColorRepository.cs:106</div></div>
</div><!-- fragment --><p><b>Performance</b></p>
<ul>
<li>First reads: ~1-100ms per project (disk I/O dependent on file size)</li>
<li>Subsequent reads: &lt;1ms (memory lookup)</li>
<li>Writes: ~5-50ms (JSON serialization + disk I/O)</li>
<li>Bulk operations: O(n) for n projects</li>
</ul>
<p><b>Durability Guarantees</b></p>
<ul>
<li>All projects persisted to disk immediately after save</li>
<li>No data loss between sessions (all data written to JSON)</li>
<li>History preserved completely (all ColorHistoryEntry records saved)</li>
<li>Thread-safe writes ensure consistency even with concurrent operations</li>
</ul>
<p><b>Limitations</b></p>
<ul>
<li>Not optimized for huge projects (&gt;10,000 history entries)</li>
<li>No encryption (plain JSON files)</li>
<li>No versioning or backup mechanism (user responsible)</li>
<li>No automatic cleanup of deleted files</li>
</ul>
<p>For cloud-based sync, network drive, or encrypted storage, consider implementing alternative IColorRepository implementations (e.g., DatabaseColorRepository, CloudColorRepository). </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a42a7ec1adc5c2b12da0e8058ef5bb7db" name="a42a7ec1adc5c2b12da0e8058ef5bb7db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a7ec1adc5c2b12da0e8058ef5bb7db">&#9670;&#160;</a></span>FileColorRepository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ColorMatcher.Models.FileColorRepository.FileColorRepository </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectsDirectory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new FileColorRepository for the specified directory. </p>
<p>The directory will be created automatically if it doesn't exist. ProjectIds become filenames with .json extension for easy discovery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectsDirectory</td><td>File system path where JSON projects are stored (e.g., "C:\Users\Me\ColorMatcher\Projects" on Windows or "~/ColorMatcher/Projects" on Linux/macOS)</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>If projectsDirectory is null or empty</td></tr>
  </table>
  </dd>
</dl>
<p>Example: </p><div class="fragment"><div class="line">var repo = <span class="keyword">new</span> <a class="code hl_class" href="classColorMatcher_1_1Models_1_1FileColorRepository.html">FileColorRepository</a>(<span class="stringliteral">@&quot;./data/projects&quot;</span>);</div>
<div class="line"><span class="comment">// Creates ./data/projects directory if missing</span></div>
<div class="line"><span class="comment">// Ready to load/save projects to *.json files in that directory</span></div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae1b9bd0a47e859f93604f5f0b6d30fd8" name="ae1b9bd0a47e859f93604f5f0b6d30fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1b9bd0a47e859f93604f5f0b6d30fd8">&#9670;&#160;</a></span>AddColorHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a> &gt; ColorMatcher.Models.FileColorRepository.AddColorHistoryAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a>&#160;</td>
          <td class="paramname"><em>colorEntry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new color history entry to a project's history. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The project ID to add history to</td></tr>
    <tr><td class="paramname">colorEntry</td><td>The color matching attempt to record</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The created color entry, potentially with auto-generated fields like Id and CreatedAt. Entry is now persisted and included in project history. </dd></dl>
<p>Called each time user saves a color match attempt. Automatically loads project, adds entry, and saves back to storage. This is the primary method for building color matching history over time. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a750336863f2f42b1caee3842b0ac2fe9">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a22c9c32da634d491db87cf58acf53dfc" name="a22c9c32da634d491db87cf58acf53dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c9c32da634d491db87cf58acf53dfc">&#9670;&#160;</a></span>ClearColorHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; ColorMatcher.Models.FileColorRepository.ClearColorHistoryAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes all color history entries for a project. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The project ID to clear history for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if history was successfully cleared. False if project not found or already had no history. </dd></dl>
<p>Called by user "Clear History" action. Preserves project but resets ColorHistory list to empty. Project itself (name, reference color, sample color) is preserved. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a7638329598d27f4993ba4f51e025cad5">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a73a9bc7dec0613e2934850023740d0dc" name="a73a9bc7dec0613e2934850023740d0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a9bc7dec0613e2934850023740d0dc">&#9670;&#160;</a></span>CreateProjectAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt; ColorMatcher.Models.FileColorRepository.CreateProjectAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a>&#160;</td>
          <td class="paramname"><em>project</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new color project and persists it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">project</td><td>The color project to create. Must have a unique Id.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The created project. May include auto-generated fields like timestamps. Project is now persisted and can be retrieved via GetProjectAsync. </dd></dl>
<p>Creates the project in the underlying storage (file, database, etc.). If a project with the same ID already exists, behavior depends on implementation:</p><ul>
<li>FileColorRepository: Creates in new file (overwrites existing)</li>
<li>InMemoryColorRepository: Stores in dictionary </li>
</ul>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#ad965da5a957b2f8d6436b88666be5e05">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a65958ac99d76fe7e1bcc4519e70cb5b8" name="a65958ac99d76fe7e1bcc4519e70cb5b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65958ac99d76fe7e1bcc4519e70cb5b8">&#9670;&#160;</a></span>DeleteProjectAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; ColorMatcher.Models.FileColorRepository.DeleteProjectAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deletes a project and all associated data from the repository. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The project ID to delete</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if project was successfully deleted. False if project with given ID was not found. </dd></dl>
<p>Removes project file (in file-based implementation) or database record. This operation is typically permanent and non-recoverable. All associated color history is also deleted. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a531aac32f5467b8faa90808b48f5ff1f">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a3c0bd831d44600f873e7838696a4764e" name="a3c0bd831d44600f873e7838696a4764e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0bd831d44600f873e7838696a4764e">&#9670;&#160;</a></span>ExportProjectAsJsonAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; string &gt; ColorMatcher.Models.FileColorRepository.ExportProjectAsJsonAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exports a project to JSON format for external use or backup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The project ID to export</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON string containing complete project data including all history. Can be saved to file, sent via email, or stored in version control. </dd></dl>
<p>Used for:</p><ul>
<li>Backup/archival purposes</li>
<li>Sharing projects with others</li>
<li>Version control (Git) compatibility</li>
<li>Data portability</li>
</ul>
<p>Recommended JSON structure includes all project fields and complete ColorHistory. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a7105a119caf5bac034a9b40578e3fa9a">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a0014657d89472bf441ea9e49c7b4f05b" name="a0014657d89472bf441ea9e49c7b4f05b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0014657d89472bf441ea9e49c7b4f05b">&#9670;&#160;</a></span>GetAllProjectsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; IEnumerable&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt; &gt; ColorMatcher.Models.FileColorRepository.GetAllProjectsAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves all projects stored in the repository. </p>
<dl class="section return"><dt>Returns</dt><dd>Collection of all color projects. Empty if no projects exist. Projects are typically ordered by ModifiedAt (most recent first) for UI display. </dd></dl>
<p>Used for populating "Recent Projects" list in application. May be expensive for large numbers of projects - consider pagination for future enhancement. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#ac6f4d5907025823626571ea69b615cd0">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a47d6eadfd02f45b97032300caecb6c74" name="a47d6eadfd02f45b97032300caecb6c74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47d6eadfd02f45b97032300caecb6c74">&#9670;&#160;</a></span>GetColorHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; IEnumerable&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorHistoryEntry.html">ColorHistoryEntry</a> &gt; &gt; ColorMatcher.Models.FileColorRepository.GetColorHistoryAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves complete color history for a specific project. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The project ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Collection of color history entries for this project. Typically ordered by CreatedAt (oldest to newest or reverse). Empty if project has no history. </dd></dl>
<p>Used to display color history in DataGrid on UI. Each entry contains reference color, sample color, ΔE, and recommendation. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a050be05801c88df2440efbb3aa88e0d8">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="ab1936ee4458507fb8374279019ec9baf" name="ab1936ee4458507fb8374279019ec9baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1936ee4458507fb8374279019ec9baf">&#9670;&#160;</a></span>GetProjectAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a>?&gt; ColorMatcher.Models.FileColorRepository.GetProjectAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>projectId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a project by its unique identifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projectId</td><td>The unique project identifier (typically GUID)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The color project if found, including full ColorHistory. Returns null if project with given ID doesn't exist. </dd></dl>
<p>Loads the complete project from storage including all associated color history. This is typically the first operation when user opens an existing project. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#ac9703d13a166119d1b65be5b395999ab">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a4dce0fa55b66c832b4fe82b64b243e7c" name="a4dce0fa55b66c832b4fe82b64b243e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dce0fa55b66c832b4fe82b64b243e7c">&#9670;&#160;</a></span>ImportProjectFromJsonAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt; ColorMatcher.Models.FileColorRepository.ImportProjectFromJsonAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>jsonData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Imports a project from JSON format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jsonData</td><td>JSON string containing project data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The imported project with all data restored</dd></dl>
<p>Inverse operation of ExportProjectAsJsonAsync. Parses JSON and creates new project in repository. Used for:</p><ul>
<li>Restoring from backups</li>
<li>Receiving shared projects</li>
<li>Migrating from other systems</li>
</ul>
<p>Typically generates new ID for imported project to avoid conflicts with existing projects. </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#a5e39d53cbd805b66b3eac3b3d940e0fd">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<a id="a34ddb5a53e624f78f60d63d95e42d546" name="a34ddb5a53e624f78f60d63d95e42d546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ddb5a53e624f78f60d63d95e42d546">&#9670;&#160;</a></span>UpdateProjectAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a> &gt; ColorMatcher.Models.FileColorRepository.UpdateProjectAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classColorMatcher_1_1Models_1_1ColorProject.html">ColorProject</a>&#160;</td>
          <td class="paramname"><em>project</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates an existing project with new values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">project</td><td>The project with updated field values. Must have existing Id.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The updated project as persisted</dd></dl>
<p>Overwrites the project in storage with new values. ModifiedAt timestamp is automatically updated to current time. ColorHistory list is preserved (to add entries, use AddColorHistoryAsync). If project doesn't exist, behavior depends on implementation (may throw or create new). </p>

<p>Implements <a class="el" href="interfaceColorMatcher_1_1Models_1_1IColorRepository.html#adf11439fa6c35742dcfc436baa4fd437">ColorMatcher.Models.IColorRepository</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Models/<b>FileColorRepository.cs</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
